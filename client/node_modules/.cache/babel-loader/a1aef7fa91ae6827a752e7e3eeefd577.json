{"ast":null,"code":"var _jsxFileName = \"/Users/macrock/Desktop/CodingDojo/MERNStack/Assignments/36_C_Authors/authors/client/src/views/New.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport AuthorForm from '../components/AuthorForm';\nimport { useParams, Link, useHistory } from \"react-router-dom\";\nimport CancelButton from '.../Buttons/CancelButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _s(() => {\n  _s();\n\n  const [authors, setAuthors] = useState([]);\n  const history = useHistory();\n  const [errors, setErrors] = useState([]);\n\n  const createAuthor = author => {\n    axios.post('http://localhost:8000/api/authors', author).then(res => {\n      setAuthors([...authors, res.data]);\n      history.push('/');\n    }).catch(err => {\n      const errorResponse = err.response.data.errors; // Get the errors from err.response.data\n\n      const errorArr = []; // Define a temp error array to push the messages in\n\n      for (const key of Object.keys(errorResponse)) {\n        // Loop through all errors and get the messages\n        errorArr.push(errorResponse[key].message);\n      } // Set Errors\n\n\n      setErrors(errorArr);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(AuthorForm, {\n      onSubmitProp: createAuthor,\n      initialName: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }, this), errors.map((err, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      children: err\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 40\n    }, this)), /*#__PURE__*/_jsxDEV(CancelButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n}, \"aBokHLvjTVJmBNKh3BIyl8UuU+o=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"names":["React","useState","axios","AuthorForm","useParams","Link","useHistory","CancelButton","authors","setAuthors","history","errors","setErrors","createAuthor","author","post","then","res","data","push","catch","err","errorResponse","response","errorArr","key","Object","keys","message","map","index"],"sources":["/Users/macrock/Desktop/CodingDojo/MERNStack/Assignments/36_C_Authors/authors/client/src/views/New.js"],"sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\nimport AuthorForm from '../components/AuthorForm';\nimport { useParams, Link, useHistory } from \"react-router-dom\";\nimport CancelButton from '.../Buttons/CancelButton';\n    \nexport default () => {\n    const [authors, setAuthors] = useState([]);\n    const history = useHistory();\n    const [errors, setErrors] = useState([]); \n    \n    const createAuthor = author => {\n        axios.post('http://localhost:8000/api/authors', author)\n            .then(res=>{\n                setAuthors([...authors, res.data]);\n                history.push('/');\n\n            })\n            .catch(err=>{\n                const errorResponse = err.response.data.errors; // Get the errors from err.response.data\n                const errorArr = []; // Define a temp error array to push the messages in\n                for (const key of Object.keys(errorResponse)) { // Loop through all errors and get the messages\n                    errorArr.push(errorResponse[key].message)\n                }\n                // Set Errors\n                setErrors(errorArr);\n            })\n    }\n    \n    return (\n        <div>\n           <AuthorForm onSubmitProp={createAuthor} initialName=\"\" />\n           {errors.map((err, index) => <p key={index}>{err}</p>)}\n            <CancelButton />\n        </div>\n    );\n}\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,UAA1B,QAA4C,kBAA5C;AACA,OAAOC,YAAP,MAAyB,0BAAzB;;AAEA,kBAAe,MAAM;EAAA;;EACjB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAMS,OAAO,GAAGJ,UAAU,EAA1B;EACA,MAAM,CAACK,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;;EAEA,MAAMY,YAAY,GAAGC,MAAM,IAAI;IAC3BZ,KAAK,CAACa,IAAN,CAAW,mCAAX,EAAgDD,MAAhD,EACKE,IADL,CACUC,GAAG,IAAE;MACPR,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAaS,GAAG,CAACC,IAAjB,CAAD,CAAV;MACAR,OAAO,CAACS,IAAR,CAAa,GAAb;IAEH,CALL,EAMKC,KANL,CAMWC,GAAG,IAAE;MACR,MAAMC,aAAa,GAAGD,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBP,MAAxC,CADQ,CACwC;;MAChD,MAAMa,QAAQ,GAAG,EAAjB,CAFQ,CAEa;;MACrB,KAAK,MAAMC,GAAX,IAAkBC,MAAM,CAACC,IAAP,CAAYL,aAAZ,CAAlB,EAA8C;QAAE;QAC5CE,QAAQ,CAACL,IAAT,CAAcG,aAAa,CAACG,GAAD,CAAb,CAAmBG,OAAjC;MACH,CALO,CAMR;;;MACAhB,SAAS,CAACY,QAAD,CAAT;IACH,CAdL;EAeH,CAhBD;;EAkBA,oBACI;IAAA,wBACG,QAAC,UAAD;MAAY,YAAY,EAAEX,YAA1B;MAAwC,WAAW,EAAC;IAApD;MAAA;MAAA;MAAA;IAAA,QADH,EAEIF,MAAM,CAACkB,GAAP,CAAW,CAACR,GAAD,EAAMS,KAAN,kBAAgB;MAAA,UAAgBT;IAAhB,GAAQS,KAAR;MAAA;MAAA;MAAA;IAAA,QAA3B,CAFJ,eAGI,QAAC,YAAD;MAAA;MAAA;MAAA;IAAA,QAHJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAOH,CA9BD;EAAA,QAEoBxB,UAFpB;AAAA"},"metadata":{},"sourceType":"module"}